
=====================================
2021-05-23 04:56:30 0x7f6cc807b700 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 28 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 30 srv_active, 0 srv_shutdown, 37407 srv_idle
srv_master_thread log flush and writes: 0
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 95
OS WAIT ARRAY INFO: signal count 92
RW-shared spins 3, rounds 4, OS waits 1
RW-excl spins 17, rounds 230, OS waits 7
RW-sx spins 0, rounds 0, OS waits 0
Spin rounds per wait: 1.33 RW-shared, 13.53 RW-excl, 0.00 RW-sx
------------------------
LATEST DETECTED DEADLOCK
------------------------
2021-05-23 04:55:53 0x7f6cc80c2700
*** (1) TRANSACTION:
TRANSACTION 19166, ACTIVE 11 sec inserting
mysql tables in use 1, locked 1
LOCK WAIT 3 lock struct(s), heap size 1136, 2 row lock(s), undo log entries 1
MySQL thread id 25, OS thread handle 140105189144320, query id 619 172.17.0.1 root update
insert into t values(60,35,62,63) on duplicate key update c2=35
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 54 page no 5 n bits 72 index i_c2 of table `deadlock`.`t` trx id 19166 lock_mode X locks gap before rec insert intention waiting
Record lock, heap no 6 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
0: len 4; hex 80000024; asc    $;;
1: len 4; hex 80000032; asc    2;;

*** (2) TRANSACTION:
TRANSACTION 19161, ACTIVE 23 sec inserting
mysql tables in use 1, locked 1
4 lock struct(s), heap size 1136, 4 row lock(s), undo log entries 2
MySQL thread id 23, OS thread handle 140105189435136, query id 623 172.17.0.1 root update
-- start transaction;
-- insert into t values(50,36,52,53) on duplicate key update c2=36;

insert into t values(70,34,72,73) on duplicate key update c2=34
*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 54 page no 5 n bits 72 index i_c2 of table `deadlock`.`t` trx id 19161 lock_mode X locks gap before rec
Record lock, heap no 5 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
0: len 4; hex 80000029; asc    );;
1: len 4; hex 80000028; asc    (;;

Record lock, heap no 6 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
0: len 4; hex 80000024; asc    $;;
1: len 4; hex 80000032; asc    2;;

*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 54 page no 5 n bits 72 index i_c2 of table `deadlock`.`t` trx id 19161 lock_mode X locks gap before rec insert intention waiting
Record lock, heap no 6 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
0: len 4; hex 80000024; asc    $;;
1: len 4; hex 80000032; asc    2;;

*** WE ROLL BACK TRANSACTION (1)
------------
TRANSACTIONS
------------
Trx id counter 19167
Purge done for trx's n:o < 19166 undo n:o < 0 state: running but idle
History list length 7
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 421580736224016, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 421580736223088, not started
0 lock struct(s), heap size 1136, 0 row lock(s)
---TRANSACTION 19161, ACTIVE 60 sec
4 lock struct(s), heap size 1136, 5 row lock(s), undo log entries 2
MySQL thread id 23, OS thread handle 140105189435136, query id 626 172.17.0.1 root
--------
FILE I/O
--------
I/O thread 0 state: waiting for completed aio requests (insert buffer thread)
I/O thread 1 state: waiting for completed aio requests (log thread)
I/O thread 2 state: waiting for completed aio requests (read thread)
I/O thread 3 state: waiting for completed aio requests (read thread)
I/O thread 4 state: waiting for completed aio requests (read thread)
I/O thread 5 state: waiting for completed aio requests (read thread)
I/O thread 6 state: waiting for completed aio requests (write thread)
I/O thread 7 state: waiting for completed aio requests (write thread)
I/O thread 8 state: waiting for completed aio requests (write thread)
I/O thread 9 state: waiting for completed aio requests (write thread)
Pending normal aio reads: [0, 0, 0, 0] , aio writes: [0, 0, 0, 0] ,
ibuf aio reads:, log i/o's:, sync i/o's:
Pending flushes (fsync) log: 0; buffer pool: 0
1002 OS file reads, 1492 OS file writes, 571 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 0 merges
merged operations:
insert 0, delete mark 0, delete 0
discarded operations:
insert 0, delete mark 0, delete 0
Hash table size 34679, node heap has 1 buffer(s)
Hash table size 34679, node heap has 1 buffer(s)
Hash table size 34679, node heap has 5 buffer(s)
Hash table size 34679, node heap has 0 buffer(s)
Hash table size 34679, node heap has 2 buffer(s)
Hash table size 34679, node heap has 1 buffer(s)
Hash table size 34679, node heap has 0 buffer(s)
Hash table size 34679, node heap has 0 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number          84540687
Log buffer assigned up to    84540687
Log buffer completed up to   84540687
Log written up to            84540687
Log flushed up to            84540687
Added dirty pages up to      84540687
Pages flushed up to          84540687
Last checkpoint at           84540687
477 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total large memory allocated 137428992
Dictionary memory allocated 439314
Buffer pool size   8192
Free buffers       7021
Database pages     1161
Old database pages 438
Modified db pages  0
Pending reads      0
Pending writes: LRU 0, flush list 0, single page 0
Pages made young 0, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 979, created 182, written 886
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
No buffer pool page gets since the last printout
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 1161, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
0 read views open inside InnoDB
Process ID=1, Main thread ID=140105252476672 , state=sleeping
Number of rows inserted 101, updated 432, deleted 54, read 12367
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================
